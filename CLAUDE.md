# Claude Code 開発履歴とコンテキスト

このファイルは、Claude Codeとの開発セッションの履歴と、プロジェクトのコンテキストを記録するためのものです。

## プロジェクト概要

**目的**: MetaTrader 4用の裁量トレード支援ツールの開発
**開発者**: kapistock365
**開始日**: 2025年1月

## 開発背景と課題

### 現在の課題
1. **トレンドフォロー**: 価格のブレイクアウトを確実に捉えたい
2. **損切り管理**: 相場が逆行した際に損切りができず、利益を失ってしまう
3. **感情的な取引**: 機械的なルールに従えない

### 解決アプローチ
- 自動化ツールによる感情の排除
- リスク管理の可視化
- 段階的な利益確保システム

## 既存資産

### CT_Trail_2.00 ライブラリ
過去に開発したEAから以下のライブラリを流用：
- `AccountManager.mqh`: 口座管理、自動ロット計算
- `OrderManager.mqh`: 注文管理、トレーリングストップ
- `GuiManager.mqh`: GUI表示管理
- `Constants.mqh`: 共通定数定義

## 開発したツール

### 1. トレンドフォロー系
- **TrendBreakout.mq4** (インジケーター)
  - サポート/レジスタンスの自動検出
  - ブレイクアウトアラート
  - ADXによるトレンド強度表示

- **TrendFollowEA.mq4** (EA)
  - ブレイクアウトでの自動エントリー
  - 既存ライブラリを活用したリスク管理
  - トレンドフィルター機能

### 2. リスク管理系
- **RiskManagerEA.mq4** (EA)
  - 全ポジションへの自動損切り設定
  - 日次損失制限（5%）
  - 部分決済とブレークイーブン機能
  - トレーリングストップ

- **RiskMonitor.mq4** (インジケーター)
  - リアルタイムリスク表示
  - 日次統計（勝率、RR比）
  - 損失制限警告

## 設計思想

### 1. モジュール化
- 既存ライブラリの再利用
- 機能ごとに独立したツール
- 組み合わせて使用可能

### 2. リスク管理優先
- 損失制限を最優先
- 段階的な利益確保
- 可視化による意識付け

### 3. 感情の排除
- 機械的なルール実行
- アラートによる客観的判断
- 自動化による迷いの排除

## 今後の拡張案

1. **バックテスト機能の追加**
2. **複数通貨ペア対応**
3. **AIを使った相場分析**
4. **トレード日誌の自動生成**

## 他のPCでの開発再開方法

1. このリポジトリをクローン
2. CLAUDE.mdを読んでコンテキストを理解
3. Claude Codeに以下を伝える：
   ```
   MT4の裁量トレード支援ツールを開発しています。
   CLAUDE.mdに開発履歴があるので、それを踏まえて開発を続けたいです。
   ```

## 重要な決定事項

- **エンコーディング**: MQL4ファイルはUTF-8で統一
- **ブローカー対応**: pips×10のブローカーに対応済み
- **リスク設定**: 1トレード最大2%、日次最大5%を推奨

## よくある質問と回答

**Q: なぜ既存ライブラリを使うのか？**
A: 実績のあるコードを再利用することで、品質と開発速度を向上

**Q: 損切りの自動化は危険では？**
A: むしろ感情的な判断による大損失を防ぐために必要

**Q: トレンドフォローの精度は？**
A: 単独では限界があるため、裁量判断と組み合わせて使用